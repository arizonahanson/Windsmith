
PART =

rule export
  command = openscad -o $out -p params.json -P flute -D "PART=\"$PART\"" $in

build build/head.3mf: export flute.scad | scad/head.scad scad/tenon.scad scad/lib/geometry.scad scad/lib/operators.scad scad/lib/tools.scad
  PART = head

build build/body.3mf: export flute.scad | scad/body.scad scad/tenon.scad scad/lib/geometry.scad scad/lib/operators.scad scad/lib/tools.scad
  PART = body

build build/foot.3mf: export flute.scad | scad/foot.scad scad/tenon.scad scad/lib/geometry.scad scad/lib/operators.scad scad/lib/tools.scad
  PART = foot

default build/head.3mf build/body.3mf build/foot.3mf
